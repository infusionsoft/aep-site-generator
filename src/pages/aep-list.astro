---
import StarlightPage from "@astrojs/starlight/components/StarlightPage.astro";
import FullAepList from "../components/AepList/FullAepList.astro";
import * as fs from "fs";
import type { SiteStructure } from "../utils/site-structure";
import { getLatestEditionName } from "../utils/site-structure";

// Load site structure to get the latest edition
const siteStructurePath = "generated/site-structure.json";
const jsonContent = fs.readFileSync(siteStructurePath, "utf-8");
const siteStructure: SiteStructure = JSON.parse(jsonContent);

const latestEditionName = getLatestEditionName(siteStructure);
if (!latestEditionName) {
  throw new Error("No latest edition found in site structure");
}

const edition = siteStructure.aeps.editions[latestEditionName];
---

<StarlightPage
        frontmatter={{
          title: "AEPs",
          tableOfContents: { minHeadingLevel: 1 },
        }}
        headings={[]}
>
    <FullAepList edition={edition} />
</StarlightPage>