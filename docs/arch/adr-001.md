# ADR 001: AIP Documentation Site Implementation

## Status

Proposed

---

## Context

We need to create a documentation site for our company's API Improvement Proposals (AIPs), similar
to [Google's AIP site](https://google.aip.dev/) or the [AEP (API Enhancement Proposals)](https://aep.dev/) site. We
explored several implementation approaches:

### Background Research

- **Google AIPs**: Original source using Python-based site generator with branding hardcoded in separate repo
- **AEPs**: De-Googled version using TypeScript-based site generator with Starlight (Astro framework)
- Both implementations require forking to customize branding as assets are hardcoded in their respective site-generator
  repositories

### Options Considered

#### Option 1: Fork Google AIP Site Generator (Python)

**Implementation:**

- Fork [aip-dev/google.aip.dev](https://github.com/aip-dev/google.aip.dev) for content
    - licensed under the Creative Commons Attribution 4.0 License, and code samples are licensed under the Apache 2.0
      License
- Fork [aip-dev/site-generator](https://github.com/aip-dev/site-generator) (Python) for branding customization
    - licensed under the Apache 2.0 License

**Pros:**

- Original, proven implementation
- Comprehensive AIP structure already built

**Cons:**

- Must build and publish Python module to PyPI or private package registry
- Two-step deployment: publish module, then build site
- Older codebase with more Google-specific assumptions
- More complex CI/CD pipeline
- Python dependency management overhead
- More branding files to replace
- Not actively maintained

#### Option 2: Fork AEP Site Generator (TypeScript)

**Implementation:**

- Fork [aep-dev/aeps](https://github.com/aep-dev/aeps) for content
    - licensed under the Creative Commons Attribution 4.0 License, and code samples are licensed under the Apache 2.0
      License.
- Fork [aep-dev/site-generator](https://github.com/aep-dev/site-generator) (TypeScript/Starlight) for branding
  customization
    - licensed under the Apache 2.0 License

**Pros:**

- Already de-Googled, fewer vendor-specific assumptions
- Simple build process: `npm install && npm run build`
- No package publishing required
- Easier security auditing with standard npm tools
- Fewer branding assets to replace
- Actively maintained
- Uses Starlight (MIT licensed)

**Cons:**

- Maintaining a fork for branding changes
- Must merge upstream updates if desired (can be avoided by "freezing" the fork)

#### Option 3: Build Custom Site from Scratch

**Implementation:**

- Create new site with custom branding using a tool like Starlight
- Build AIP structure (numbering, status badges, navigation) from scratch

**Pros:**

- Complete ownership, no fork maintenance
- Full control over all aspects
- Clean, minimal codebase

**Cons:**

- Must reinvent AIP-specific features:
    - Status badge system
    - AIP numbering and organization
    - Sidebar generation by category
    - Index/listing pages
    - Metadata handling
    - Cross-references between AIPs
- Higher initial development effort
- Longer time to launch

#### Option 4: Vanilla GitHub Pages (Hugo/Jekyll/Docusaurus/VitePress)

**Pros:**

- Maximum flexibility
- No dependency on AIP/AEP implementations

**Cons:**

- Must build the entire AIP structure from scratch
- No existing reference implementation
- Significantly more development work
- Longest time to launch

### Security Considerations

- **Python approach**: Requires package publishing infrastructure, older dependency ecosystem
- **TypeScript approach**: Modern npm security tooling (`npm audit`), simpler supply chain
- **Both**: Regular dependency updates required
- **License**: Starlight uses MIT license, permissible for commercial/public company use

### Operational Considerations

- Site will be publicly accessible on the internet
- Must be maintainable by engineering team long-term
- Need to support iterative content updates
- Standard CI/CD for static site deployment

---

## Decision

**We will fork the [AEP site-generator](https://github.com/aep-dev/site-generator)
and [AEP content](https://github.com/aep-dev/aeps) repos (TypeScript/Starlight implementation)**

### Rationale

1. **Simplest deployment**: Single-step build process, no package publishing required
2. **Lower operational complexity**: Standard npm workflow familiar to most developers
3. **Better security posture**: Modern tooling with easier dependency auditing
4. **Proven AIP structure**: All navigation, status badges, and organization already implemented
5. **Already de-Googled**: Less customization work required upfront
6. **Single repository**: Easier to maintain and audit
7. **Acceptable maintenance burden**: Can "freeze" the fork if needed, treating it as a starting point rather than
   tracking upstream changes

### Implementation Approach

- Fork `aep-dev/site-generator` to company GitHub organization
- Replace branding assets (logos, colors, site metadata)
- Customize content for company-specific AIPs
- Treat as "fork and freeze" - take their structure but don't necessarily track upstream updates

---

## Consequences

### Positive

- Fast time to launch with proven infrastructure
- Minimal ongoing maintenance if we don't track upstream
- Simple CI/CD: build static site and deploy to GitHub Pages
- Modern, familiar tooling (npm, TypeScript, Astro)
- MIT license allows unrestricted commercial use

### Negative

- Maintaining a fork (mitigated by "freeze" approach)
- Any upstream improvements require manual integration
- Need to understand Astro/Starlight for deep customization

### Neutral

- Team needs familiarity with TypeScript/Astro (widely adopted technologies)
- Branding changes require code modifications rather than configuration

## Alternatives Rejected

- **Google AIP generator**: Package publishing complexity outweighs benefits
- **Custom Starlight site**: Too much reinvention of AIP structure
- **Other static site generators**: Too long to get it up and running initially

## Notes

- Review AEP site-generator complexity to determine if simplification is possible
- Consider contributing branding configurability back to AEP upstream if we develop a cleaner approach
- Monitor AEP repository for any security updates or critical patches
